{% extends 'base.html' %}

{% block title %}Cadastro{% endblock %}

{% block links %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/main.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='css/create_feral.css') }}">
{% endblock %}

{% block content %}
<main>
    <h1>Cadastro de Personagem</h1>

    <nav class="form-nav">
        <a data-target="0" class="active">Estilo</a>
        <a data-target="1">Habilidades</a>
        <a data-target="2">Traços</a>
        <a data-target="3">Utensílios</a>
        <a data-target="4">Informações</a>
    </nav>

    <div class="form-viewport">
        <form action="{{ url_for('feral.create_feral') }}" enctype="multipart/form-data" method="post" class="form-container" id="formContainer">
            <!-- Sessão 0: Estilo -->
            <section>
                <div class="stats">
                    <h3>1. Escolha o seu <span class="amarelo">Estilo</span></h3>
                    <p><span class="amarelo">ESTILOS</span> são os atributos principais dos ferais e monstros e representam as diferentes maneiras de abordar uma determinada ação.
                    Níveis em Estilo variam de 1 a 5 para ferais. Cada feral preparado começa com 3 em um Estilo, 2 em outro
                    Estilo e 1 nos Estilos remanescentes, com base no UTENSÍLIO escolhido.</p>
                    {% for estilo in ['LIGEIRO','PODEROSO','PRECISO','SAGAZ'] %}
                        <div>
                            <p>{{ estilo }}</p>
                            <input type="number" name="{{ estilo }}" min="0" max="5" value="0" required>
                        </div>
                    {% endfor %}
                </div>
            </section>

            <!-- Sessão 1: Habilidades -->
            <section>
                <div class="habilidades">
                    <h3>2. Escolha sua <span class="azul">Habilidade</span></h3>
                    <p><span class="azul">HABILIDADES</span> são as competências que ferais e monstros mais usam. Níveis em Habilidades variam entre 0 e 3. Cada feral preparado
                    começa com +1 em três Habilidades diferentes e +0 nas Habilidades restantes, com base em sua Origem.
                    Para cada nível em uma Habilidade, aumente o resultado de um Teste em 1. Você pode combinar qualquer <span class="azul">HABILIDADE</span> com
                    qualquer <span class="amarelo">ESTILO</span> quando fizer um Teste. São doze as <span class="azul">HABILIDADES</span>:</p>
                    {% for hab in ['AGARRAR','ATRAVESSAR','ESTUDAR','ARMAZENAR','BUSCAR','EXIBIR','ASSEGURAR','CHAMAR','GOLPEAR','ATIRAR','CURAR','MANUFATURAR'] %}
                        <div>
                            <p>{{ hab }}</p>
                            <input type="number" name="{{ hab }}" min="0" max="5" value="0" required>
                        </div>
                    {% endfor %}
                </div>
            </section>

            <!-- Sessão 2: Traços -->
            <section>
                <div class="traco">
                    {% for t in range(1,4) %}
                        <div>
                            <h2>Traço {{ t }}:</h2>
                            <label>Nome:</label>
                            <input type="text" name="nome_traco{{ t }}" required>
                            <label>Custo:</label><br>
                            <input type="text" name="custo_traco{{ t }}" required>
                            <p>Descrição</p>
                            <textarea name="descricao_traco{{ t }}" required></textarea>

                            <div class="radio">
                                <p><span class="azul">Habilidade do</span><span class="verde"> Traço</span></p>
                                {% for hab in ['agarrar','atirar','curar','golpear','armazenar','atravessar','estudar','manufaturar','assegurar','chamar','exibir','procurar'] %}
                                    <label for="{{ hab }}{{ t }}"><span>{{ hab.capitalize() }}</span></label>
                                    <input type="radio" id="{{ hab }}{{ t }}" name="habilidade_traco{{ t }}" value="{{ hab }}" required>
                                {% endfor %}
                                <br>
    
                                <p><span class="amarelo">Estilo</span></p>
                                {% for est in ['ligeiro','poderoso','preciso','sagaz'] %}
                                    <label for="{{ est }}{{ t }}">{{ est.capitalize() }}</label>
                                    <input type="radio" id="{{ est }}{{ t }}" name="estilo_traco{{ t }}" value="{{ est }}" required>
                                {% endfor %}
                            </div>
                        </div>
                    {% endfor %}
                </div>
            </section>

            <!-- Sessão 3: Utensílios -->
            <section>
                <div class="utensilios">
                    <h3>Utensílios</h3>
                    <input type="text" name="utensilio_nome" placeholder="Nome" required>
                    <input type="text" name="utensilio_alcance" placeholder="alcance" required>
                    <input type="text" name="utensilio_ataques" placeholder="ataques" required>
                </div>
            </section>

            <!-- Sessão 4: Informações -->
            <section class="active">
                <div class="info">
                    <div>
                        <label>Nome:</label>
                        <input type="text" name="nome" required>
                    </div>
                    <div>
                        <label>Titulo do feral:</label>
                        <input type="text" name="titulo" required>
                    </div>
                    <div>
                        <label>Especialidade:</label>
                        <input type="text" name="especialidade" required>
                    </div>
                    <div>
                        <label>Você é...</label>
                        <input type="text" name="voce_e" required>
                    </div>
                    <div>
                        <label>Mas tenta ser...</label>
                        <input type="text" name="tenta_ser" required>
                    </div>
                    <div>
                        <label>Feras Familiares:</label>
                        <input type="text" name="feras_familiares" required>
                    </div>
                    <div>
                        <label>Prato tipico:</label>
                        <input type="text" name="prato_tipico" required>
                    </div>
                    <div>
                        <label>Tempero tipico:</label>
                        <input type="text" name="tempero_tipico" required>
                    </div>
                    <div>
                        <label>Criação:</label>
                        <textarea name="criacao" required></textarea>
                    </div>
                    <div>
                        <label>Iniciação:</label>
                        <textarea name="iniciacao" required></textarea>
                    </div>
                    <div>
                        <label>Ambição:</label>
                        <textarea name="ambicao" required></textarea>
                    </div>
                    <div>
                        <label>Conexão:</label>
                        <textarea name="conexao" required></textarea>
                    </div>
                    <div>
                        <label>Imagem:</label>
                        <input type="file" name="imagem" accept="image/*" required>
                    </div>
                    <button type="submit">Criar Feral</button>
                </div>
            </section>
        </form>
    </div>


</main>

<script>
const viewport  = document.querySelector('.form-viewport');
const container = document.getElementById('formContainer');
const links     = document.querySelectorAll('.form-nav a');
const sections  = container.querySelectorAll('section');

function goTo(index) {
    const w = viewport.clientWidth;
    container.style.transform = `translateX(-${index * w}px)`;

    links.forEach(l => l.classList.remove('active'));
    links[index].classList.add('active');

    sections.forEach(s => s.classList.remove('active'));
    sections[index].classList.add('active');
}

links.forEach((link, i) => link.addEventListener('click', () => goTo(i)));
window.addEventListener('resize', () => {
    const activeIndex = [...links].findIndex(l => l.classList.contains('active'));
    if (activeIndex >= 0) goTo(activeIndex);
});
</script>
{% endblock %}